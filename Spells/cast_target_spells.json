[

      {
        "type": "SPELL",
        "id": "PSY_magi_push_force",
        "name": "Push Force",
        "description": "You channel the magical force to push an enemy backward.",
        "effect": "directed_push",
        "shape": "blast",
        "valid_targets": [ "hostile" , "ally"],
        "flags": [ "LOUD", "VERBAL", "SOMATIC" ],
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "energy_source": "MANA",
        "min_damage": 6,
        "max_damage": 11,
        "damage_increment": 0.5,
        "min_range": 3,
        "max_range": 5,
        "range_increment": 0.2,
        "base_energy_cost": 80,
        "difficulty": 6,
        "max_level": 20,
        "base_casting_time": 150,
        "final_casting_time": 100,
        "casting_time_increment": -2.5
      },

      {
        "type": "SPELL",
        "id": "PSY_magi_push_force_cone",
        "name": "Push Force Cone",
        "description": "You channel the magical force to push an enemy backward.",
        "effect": "directed_push",
        "shape": "cone",
        "valid_targets": [ "hostile", "ally", "ground", "item" ],
        "flags": [ "LOUD", "VERBAL", "SOMATIC" ],
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "energy_source": "MANA",
        "min_damage": 3,
        "max_damage": 5,
        "damage_increment": 0.25,
        "min_range": 5,
        "max_range": 10,
        "range_increment": 0.25,
        "min_aoe": 40,
        "max_aoe": 60,
        "aoe_increment": 1.0,
        "base_energy_cost": 150,
        "difficulty": 7,
        "max_level": 20,
        "base_casting_time": 250,
        "final_casting_time": 150,
        "casting_time_increment": -5.0
      },




      {
        "type": "SPELL",
        "id": "PSY_magi_mindcontrol_perma",
        "name": "Perma Mindcontrol",
        "description": "Permanent Control an enemy under the 15000 HP and change to our side.",
        "valid_targets": [ "hostile" ],
        "effect": "charm_monster",
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "message": "",
        "min_damage": 15000,
        "max_damage": 15000,
        "max_level": 30,
        "difficulty": 7,
        "base_casting_time": 800,
        "casting_time_increment": -20.0,
        "final_casting_time": 300,
        "shape": "blast",
        "energy_source": "MANA",
        "base_energy_cost": 700,
        "energy_increment": -10,
        "final_energy_cost": 400,
        "min_range": 6,
        "max_range": 21,
        "range_increment": 0.50,
        "min_duration": 300,
        "max_duration": 500,
        "duration_increment": 10,
        "flags": ["PERMANENT", "SOMATIC", "VERBAL", "SILENT", "NO_LEGS", "NO_HANDS","NO_PROJECTILE" ]
      },

      {
        "id": "PSY_magi_electro_stun",
        "type": "SPELL",
        "name": { "str": "Head Knocking" },
        "description": "This spell stuns enemy in short distance for a short time.",
        "effect": "mod_moves",
        "shape": "blast",
        "message": "",
        "flags": [ "SILENT","NO_LEGS" ],
        "valid_targets": [ "ally", "hostile", "ground" ],
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "energy_source": "MANA",
        "base_casting_time": 100,
        "casting_time_increment": -2.5,
        "final_casting_time": 50,
        "base_energy_cost": 120,
        "energy_increment": -2.0,
        "final_energy_cost": 80,
        "min_damage": -600,
        "max_damage": -1200,
        "damage_increment": -50,
        "min_range": 1,
        "max_range": 5,
        "range_increment": 0.2,
        "max_level": 20
      },

      {
        "id": "PSY_magi_sweep",
        "type": "SPELL",
        "name": "Magical Sweep",
        "description": "Sweeping with magical legs around and knock down units to the ground for a short time.",
        "valid_targets": [ "hostile","ally", "ground" ],
        "flags": [ "LOUD","NO_PROJECTILE", "NO_HANDS" ],
        "effect": "attack",
        "effect_str": "downed",
        "shape": "line",
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "energy_source": "MANA",
        "difficulty": 3,
        "base_casting_time": 60,
        "casting_time_increment": -1.5,
        "final_casting_time": 30,
        "base_energy_cost": 40,
        "energy_increment": -1.0,
        "final_energy_cost": 30,
        "max_level": 20,
        "min_aoe": 2,
        "max_aoe": 2,
        "min_range": 1,
        "max_range": 1,
        "min_duration": 600,
        "max_duration": 1200,
        "duration_increment": 30
      },

      {
        "id": "PSY_magi_str_down_spell",
        "type": "SPELL",
        "name": "STR DOWN",
        "description": "Force Fear.",
        "valid_targets": [ "hostile" ],
        "flags": [ "NO_PROJECTILE","NO_LEGS" ],
        "effect": "attack",
        "effect_str": "PSY_magi_STR_DOWN",
        "shape": "blast",
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "difficulty": 0,
        "base_energy_cost": 110,
        "energy_increment": -2.0,
        "final_energy_cost": 70,
        "base_casting_time": 80,
        "max_level": 20,
        "min_range": 10,
        "max_range": 15,
        "range_increment": 0.25,
        "min_duration": 12000,
        "max_duration": 30000
      },

      {
        "id": "PSY_magi_dex_down_spell",
        "type": "SPELL",
        "name": "DEX DOWN",
        "description": "Force Fear.",
        "valid_targets": [ "hostile" ],
        "flags": [ "NO_PROJECTILE","NO_LEGS" ],
        "effect": "attack",
        "effect_str": "PSY_magi_DEX_DOWN",
        "shape": "blast",
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "difficulty": 0,
        "base_energy_cost": 110,
        "energy_increment": -2.0,
        "final_energy_cost": 70,
        "base_casting_time": 80,
        "max_level": 20,
        "min_range": 10,
        "max_range": 15,
        "range_increment": 0.25,
        "min_duration": 12000,
        "max_duration": 30000
      },

      {
        "id": "PSY_magi_per_down_spell",
        "type": "SPELL",
        "name": "PER DOWN",
        "description": "Force Fear.",
        "valid_targets": [ "hostile" ],
        "flags": [ "NO_PROJECTILE","NO_LEGS" ],
        "effect": "attack",
        "effect_str": "PSY_magi_PER_DOWN",
        "shape": "blast",
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "difficulty": 0,
        "base_energy_cost": 110,
        "energy_increment": -2.0,
        "final_energy_cost": 70,
        "base_casting_time": 80,
        "max_level": 20,
        "min_range": 10,
        "max_range": 15,
        "range_increment": 0.25,
        "min_duration": 12000,
        "max_duration": 30000
      },





    {
        "id": "PSY_magi_flying_spell",
        "type": "SPELL",
        "name": "Flying spell",
        "description": "You can float in the air, and even if you fall for a little while, you will not be damaged.",
        "effect": "attack",
        "shape": "blast",
        "targeted_monster_ids": [
          "PSY_magi_mon_eye_bat"
        ],
        "valid_targets": [ "ally" ],
        "flags": [ "NO_PROJECTILE", "SILENT", "NO_LEGS", "NO_HANDS" ,"IGNORE_WALLS","SWAP_POS"],
        "min_range": 10,
        "max_range": 30,
        "range_increment": 1.0,
        "max_level": 20,
        "difficulty": 5,
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "base_casting_time": 300,
        "energy_source": "MANA",
        "base_energy_cost": 300,
        "energy_increment": -5,
        "final_energy_cost": 200,
        "extra_effects": [
          { "id": "PSY_magi_flying_spell_sub" , "hit_self": true}
        ]
    },

    {
        "id": "PSY_magi_flying_spell_sub",
        "type": "SPELL",
        "name": "Feather Fall",
        "description": "Feather Fall",
        "valid_targets": [ "self" ],
        "flags": [ "NO_PROJECTILE","NO_LEGS", "NO_HANDS" ],
        "effect": "attack",
        "effect_str": "PSY_magi_feather_fall",
        "shape": "blast",
        "spell_class": "PSY_magi_DUNGEON_MAGE",
        "difficulty": 0,
        "base_casting_time": 100,
        "max_level": 20,
        "min_duration": 3000,
        "max_duration": 9000,
        "duration_increment": 30
    },

    {
      "id": "PSY_magi_short_blink_base",
      "type": "SPELL",
      "name": "short blink",
      "description": "Magic that moves instantly to the target point. It can confuse enemies in its path for a short time.",
      "valid_targets": ["ground"],
      "flags": ["NO_LEGS", "NO_HANDS" , "NO_PROJECTILE","SILENT" ],
      "effect": "attack",
      "shape": "line",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "energy_source": "MANA",
      "difficulty": 1,
      "max_level": 10,
      "base_casting_time": 0,
      "base_energy_cost": 250,
      "energy_increment": -4,
      "final_energy_cost": 210,
      "min_damage": 0,
      "max_damage": 0,
      "damage_type": "pure",
      "min_range": 3,
      "max_range": 5,
      "range_increment": 0.4,
      "extra_effects": [
        { "id": "PSY_magi_short_blink_line" }
      ]
    },
  
    {
      "id": "PSY_magi_short_blink_line",
      "type": "SPELL",
      "name": "short blink",
      "description": "Magic that moves instantly to the target point. It can confuse enemies in its path for a short time.",
      "valid_targets": [ "hostile", "ally" ,"ground"],
      "flags": [ "NO_PROJECTILE","LOUD" ,"IGNORE_WALLS"],
      "effect": "attack",
      "effect_str": "stunned",
      "shape": "line",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "energy_source": "MANA",
      "difficulty": 1,
      "max_level": 20,
      "base_casting_time": 170,
      "base_energy_cost": 300,
      "final_energy_cost": 300,
      "min_duration": 800,
      "max_duration": 800,
      "min_damage": 0,
      "max_damage": 0,
      "damage_type": "pure",
      "field_id": "PSY_fd_blitzkrieg",
      "min_field_intensity": 1,
      "max_field_intensity": 1,
      "min_range": 5,
      "max_range": 5,
      "range_increment": 1.0,
      "extra_effects": [
        { "id": "PSY_magi_short_blink_teleport" }
      ]
    },
  
    {
      "id": "PSY_magi_short_blink_teleport",
      "type": "SPELL",
      "name": "short blink",
      "description": "Magic that moves instantly to the target point. It can confuse enemies in its path for a short time.",
      "effect": "short_range_teleport",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "shape": "blast",
      "valid_targets": [ "ground" ],
      "flags": [ "SOMATIC", "SILENT", "NO_LEGS", "TARGET_TELEPORT" ],
      "min_range": 20,
      "max_range": 20,
      "range_increment": 1,
      "max_level": 30,
      "difficulty": 1,
      "base_casting_time": 10,
      "energy_source": "MANA",
      "base_energy_cost": 600,
      "energy_increment": -10,
      "final_energy_cost": 350
    },

    {
      "id": "PSY_magi_thunder_step",
      "type": "SPELL",
      "name": "Thunder Step",
      "description": "This magic instantly moves to the targeted point, inflicts a small amount of electrical damage to enemies in a 5-square area around it, and confuses them for a short period.\nIt is not possible to activate it through a wall.",
      "valid_targets": ["ground"],
      "flags": [ "NO_PROJECTILE","LOUD" ],
      "effect": "attack",
      "effect_str": "stunned",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "difficulty": 1,
      "max_level": 10,
      "min_duration": 200,
      "max_duration": 200,
      "base_casting_time": 75,
      "energy_source": "MANA",
      "base_energy_cost": 300,
      "energy_increment": -5,
      "final_energy_cost": 250,
      "min_aoe": 5,
      "max_aoe": 5,
      "min_damage": 10,
      "max_damage": 10,
      "damage_type": "electric",
      "min_range": 5,
      "max_range": 8,
      "range_increment": 0.5,
      "extra_effects": [
        { "id": "PSY_magi_thunder_step_blast" }
      ]
    },

    {
      "id": "PSY_magi_thunder_step_blast",
      "type": "SPELL",
      "name": "Thunder Step",
      "description": "Magic that moves instantly to the target point. It can confuse enemies in its path for a short time.",
      "valid_targets": [ "hostile"],
      "flags": [ "NO_PROJECTILE","LOUD" ],
      "effect": "attack",
      "effect_str": "stunned",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "energy_source": "MANA",
      "difficulty": 1,
      "max_level": 20,
      "base_casting_time": 170,
      "base_energy_cost": 100,
      "final_energy_cost": 100,
      "min_duration": 200,
      "max_duration": 200,
      "min_aoe": 5,
      "max_aoe": 5,
      "min_damage": 10,
      "max_damage": 10,
      "damage_type": "electric",
      "min_range": 10,
      "max_range": 10,
      "extra_effects": [
        { "id": "PSY_magi_thunder_step_teleport" }
      ]
    },

    {
      "id": "PSY_magi_thunder_step_teleport",
      "type": "SPELL",
      "name": "Thunder Step",
      "description": "This magic instantly moves to the targeted point, inflicts a small amount of electrical damage to enemies in a 5-square area around it, and confuses them for a short period.\nIt is not possible to activate it through a wall.",
      "effect": "short_range_teleport",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "shape": "blast",
      "valid_targets": [ "ground" ],
      "flags": [ "SOMATIC","LOUD", "NO_HANDS", "TARGET_TELEPORT" ],
      "min_range": 5,
      "max_range": 8,
      "range_increment": 0.5,
      "max_level": 10,
      "difficulty": 2,
      "base_casting_time": 75,
      "energy_source": "MANA",
      "base_energy_cost": 300,
      "energy_increment": -5,
      "final_energy_cost": 250

    },

    {
      "id": "PSY_magi_meditation_mana",
      "type": "SPELL",
      "name": "Mana Meditation",
      "description": "Meditate for 1 hour to recover MP.\n\nWhen the level is 0, 300 MP is recovered,\nWhen the level is 10, it recovers 600 MP.",
      "valid_targets": [ "self" ],
      "flags": ["CONCENTRATE","SILENT","NO_PROJECTILE","NO_LEGS","CONSUMES_RUNES" ],
      "effect": "recover_energy",
      "effect_str": "MANA",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "min_damage": 300,
      "damage_increment": 30,
      "max_damage": 600,
      "difficulty": 1,
      "base_casting_time": 360000,
      "max_level": 10
    },

    {
      "id": "PSY_magi_create_food_box",
      "type": "SPELL",
      "name": "Create foods",
      "components": "PSY_magi_spell_components_coin_10",
      "description": "10 Magical Coin or Magical Forest Coin and MP to summon a box that, when broken, will yield some food.\n\n If you make it in a place where there is furniture, it will fail.",
      "valid_targets": ["ground" ],
      "effect": "ter_transform",
      "effect_str": "PSY_magi_f_food_box_transform",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "energy_source": "MANA",
      "flags": [ "PERMANENT","SILENT","NO_LEGS","NO_EXPLOSION_SFX" ],
      "difficulty": 2,
      "max_level": 10,
      "min_range": 10,
      "max_range": 10,
      "base_casting_time": 60000,
      "casting_time_increment": -3000.0,
      "final_casting_time": 30000,
      "base_energy_cost": 300,
      "energy_increment": -5.0,
      "final_energy_cost": 250
    },

    {
      "id": "PSY_magi_spell_evolve_zombies",
      "type": "SPELL",
      "name": { "str": "Evolve Zombies" },
      "description": "Evolve all evolvable zombies present in the target area.",
      "targeted_monster_species": [
        "ZOMBIE"
      ],
      "valid_targets": [ "hostile", "ally" ],
      "flags": [ "SILENT","NO_PROJECTILE","NO_LEGS","IGNORE_WALLS" ],
      "difficulty": 2,
      "max_level": 10,
      "min_range": 10,
      "max_range": 20,
      "range_increment": 1.0,
      "min_aoe": 4,
      "max_aoe": 4,
      "min_damage": 10000,
      "max_damage": 10000,
      "base_casting_time": 1000,
      "casting_time_increment": -50.0,
      "final_casting_time": 500,
      "base_energy_cost": 300,
      "energy_increment": -5.0,
      "final_energy_cost": 250,
      "energy_source": "MANA",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "shape": "blast",
      "effect": "upgrade"
    },

    {
      "id": "PSY_magi_spell_revive_zombies",
      "type": "SPELL",
      "name": { "str": "Resurrect Zombies" },
      "description": "Resurrect all revivable corpses of zombie present in the target area.\nAfter being revived, zombies that were originally hostile will remain hostile.",
      "valid_targets": [ "ground","item" ],
      "flags": [ "SILENT","NO_PROJECTILE","NO_LEGS","IGNORE_WALLS" ],
      "difficulty": 4,
      "max_level": 20,
      "min_range": 5,
      "max_range": 15,
      "range_increment": 0.5,
      "min_aoe": 4,
      "max_aoe": 4,
      "base_casting_time": 50000,
      "casting_time_increment": -1000.0,
      "final_casting_time": 30000,
      "base_energy_cost": 300,
      "energy_increment": -10.0,
      "final_energy_cost": 200,
      "energy_source": "MANA",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "shape": "blast",
      "effect": "revive",
      "effect_str": "ZOMBIE"
    },

    {
      "type": "SPELL",
      "id": "PSY_magi_spell_control_zombie",
      "name": "Control Zombies",
      "description": "All zombies in the target area with less than \n100 HP at lvl:0\n150 at lvl:5\n200 at lvl:10\n will be mentally controlled for a certain period of time and turned to our side.",
      "valid_targets": [ "hostile","ground"],
      "effect": "charm_monster",
      "message": "",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "targeted_monster_species": [
        "ZOMBIE"
      ],
      "min_damage": 100,
      "max_damage": 200,
      "damage_increment":10,
      "base_casting_time": 700,
      "casting_time_increment": -20.0,
      "final_casting_time": 300,
      "shape": "blast",
      "energy_source": "MANA",
      "difficulty": 4,
      "max_level": 10,
      "min_range": 10,
      "max_range": 20,
      "range_increment": 0.5,
      "min_aoe": 4,
      "max_aoe": 4,
      "base_energy_cost": 500,
      "energy_increment": -10.0,
      "final_energy_cost": 400,
      "min_duration": 60000,
      "max_duration": 180000,
      "duration_increment": 12000,
      "flags": [ "NO_PROJECTILE","NO_LEGS","IGNORE_WALLS" ]
    },

    {
      "id": "PSY_magi_self_sonar_spell",
      "type": "SPELL",
      "name": "SONAR",
      "description": "Sonar.",
      "valid_targets": [ "self" ],
      "flags": [ "NO_PROJECTILE","NO_LEGS" ],
      "effect": "attack",
      "effect_str": "subaquatic_sonar",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "difficulty": 0,
      "energy_source": "MANA",
      "base_energy_cost": 110,
      "energy_increment": -2.0,
      "final_energy_cost": 70,
      "base_casting_time": 80,
      "max_level": 20,
      "min_range": 10,
      "max_range": 15,
      "range_increment": 0.25,
      "min_duration": 12000,
      "max_duration": 30000
    },

    {
      "id": "PSY_magi_self_noise_voice_spell",
      "type": "SPELL",
      "name": "Voice of Noise",
      "description": "The voice temporarily becomes 30 times louder. Shouting might also attract zombies from neighboring towns?",
      "valid_targets": [ "self" ],
      "flags": [ "NO_PROJECTILE","NO_LEGS","SOMATIC" ],
      "effect": "attack",
      "effect_str": "PSY_magi_voice_noise_effect",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "difficulty": 0,
      "energy_source": "MANA",
      "base_energy_cost": 50,
      "energy_increment": -2.0,
      "final_energy_cost": 30,
      "base_casting_time": 50,
      "max_level": 10,
      "min_duration": 12000,
      "max_duration": 30000,
      "duration_increment": 1800
    },

    {
      "id": "PSY_magi_self_serenade_spirits_spell",
      "type": "SPELL",
      "name": "Serenade of Spirits",
      "description": "Summons several invisibly small spirits around it and makes them play music.\nThis music is the result of the resonance and power of the spirits that govern the elements of nature, such as earth, water, wind, and fire. The unique energies of each spirit merge to create a harmonious melody that elevates the listener's motivation.\n\nLV0:1h\nLV5:5h\nLV10:10h",
      "valid_targets": [ "self" ],
      "flags": [ "RANDOM_DAMAGE","NO_PROJECTILE","NO_LEGS","SOMATIC" ],
      "effect": "effect_on_condition",
      "effect_str": "PSY_self_serenade_spirits_mood_buff",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "difficulty": 2,
      "energy_source": "MANA",
      "base_energy_cost": 550,
      "energy_increment": -5.0,
      "final_energy_cost": 500,
      "base_casting_time": 6000,
      "min_duration": 360000,
      "max_duration": 3600000,
      "duration_increment": 360000,
      "max_level": 10
    },

    {
      "id": "PSY_magi_teleport_items_feet_spell",
      "type": "SPELL",
      "name": "Magical Stealing",
      "description": "Select as many items at the target location as you like and move them instantly to your feet.\nCan be activated ignoring walls.",
      "valid_targets": [ "self" ],
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "flags": [ "CONCENTRATE", "VERBAL", "SOMATIC" ],
      "effect": "effect_on_condition",
      "effect_str": "PSY_EOC_teleport_item_to_your_feet",
      "shape": "blast",
      "difficulty": 2,
      "max_level": 15,
      "energy_source": "MANA",
      "base_energy_cost": 150,
      "base_casting_time": 6000
    },

    {
      "id": "PSY_magi_teleport_items_feet_to_spell",
      "type": "SPELL",
      "name": "Item Transfer",
      "description": "Select an item at your feet and move it instantly to the target point.\nCan be activated ignoring walls.",
      "valid_targets": [ "self" ],
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "flags": [ "CONCENTRATE", "VERBAL", "SOMATIC" ],
      "effect": "effect_on_condition",
      "effect_str": "PSY_EOC_teleport_your_feet_item_to_target",
      "shape": "blast",
      "difficulty": 2,
      "max_level": 15,
      "energy_source": "MANA",
      "base_energy_cost": 150,
      "base_casting_time": 6000
    },

    {
      "id": "PSY_magi_shapeshift_element_castable_spell",
      "type": "SPELL",
      "name": "Element Magic",
      "description": "Casts an attack magic corresponding to the element being shapeshifted.\nIt fails to cast when in the human state.\nFire:\n・AoE:4 Damage:40heat Range:12 burn effect\nWater:\n・Aoe:45Cone Damage:20pure Range:12 Fog effect\nAir:\n・AoE:4 Damage:55cut Range:12 pull effect\nEarth:\n・AoE:7 Damage30bash Range:2 downed effect",
      "valid_targets": [ "self" ],
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "flags": [ "CONCENTRATE", "VERBAL", "SOMATIC" ],
      "effect": "effect_on_condition",
      "effect_str": "PSY_EOC_element_spell_cast",
      "shape": "blast",
      "difficulty": 3,
      "max_level": 10,
      "energy_source": "MANA",
      "base_energy_cost": 200,
      "energy_increment": -5.0,
      "final_energy_cost": 150,
      "base_casting_time": 300,
      "casting_time_increment": -10,
      "final_casting_time": 200
    },

    {
      "type": "effect_on_condition",
      "id": "PSY_EOC_ROULETTE_MAGIC_ATTACK",
      "effect": {
        "switch": { "math": [ "rand(5)" ] },
        "cases": [
          { "case": 0, "effect": { "u_cast_spell": { "id": "PSY_roulette_fireball" }, "targeted": true } },
          { "case": 1, "effect": { "u_cast_spell": { "id": "PSY_roulette_magus_mana_blast" } , "targeted": true} },
          { "case": 2, "effect": { "u_cast_spell": { "id": "PSY_roulette_magus_mana_beam" } , "targeted": true} },
          { "case": 3, "effect": { "u_cast_spell": { "id": "PSY_roulette_vacuum_decompression" } , "targeted": true} },
          { "case": 4, "effect": { "u_cast_spell": { "id": "PSY_roulette_cone_cold" }, "targeted": true } },
          { "case": 5, "effect": { "u_cast_spell": { "id": "PSY_roulette_druid_tornskin" } , "targeted": false} }
        ]
      }
    },
  
    {
      "id": "PSY_roulette_fireball",
      "type": "SPELL",
      "name": "Fireball",
      "description": "You hurl a pea-sized glowing orb that produces a pressure-less blast of searing heat when it hits an obstacle or reaches the target.",
      "effect": "attack",
      "shape": "blast",
      "valid_targets": [ "self", "ally", "hostile", "ground" ],
      "flags": [ "SOMATIC", "VERBAL", "NO_LEGS", "IGNITE_FLAMMABLE" ],
      "max_level": 0,
      "min_damage": 40,
      "max_damage": 40,
      "min_aoe": 4,
      "max_aoe": 4,
      "min_range": 12,
      "max_range": 12,
      "range_increment": 1.0,
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "base_casting_time": 100,
      "base_energy_cost": 100,
      "energy_source": "MANA",
      "difficulty": 4,
      "damage_type": "heat"
    },

    {
      "id": "PSY_roulette_magus_mana_blast",
      "type": "SPELL",
      "name": "Mana Blast",
      "description": "A blast of concentrated magical power that obliterates a large area.",
      "valid_targets": [ "hostile", "ground" ],
      "flags": [ "VERBAL", "SOMATIC", "NO_LEGS" ],
      "effect": "attack",
      "shape": "blast",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "energy_source": "MANA",
      "base_casting_time": 150,
      "base_energy_cost": 200,
      "difficulty": 5,
      "max_level": 0,
      "min_damage": 50,
      "max_damage": 50,
      "damage_type": "nether",
      "min_aoe": 2,
      "max_aoe": 2,
      "min_range": 12,
      "max_range": 12
    },

    {
      "id": "PSY_roulette_magus_mana_beam",
      "type": "SPELL",
      "name": "Mana Beam",
      "description": "A beam of focused magical power that damages any foes in its path.",
      "valid_targets": [ "hostile", "ground" ],
      "flags": [ "VERBAL", "SOMATIC", "NO_LEGS", "LOUD" ],
      "effect": "attack",
      "shape": "line",
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "energy_source": "MANA",
      "base_casting_time": 150,
      "base_energy_cost": 200,
      "difficulty": 4,
      "max_level": 20,
      "min_damage": 30,
      "max_damage": 30,
      "damage_type": "nether",
      "min_aoe": 1,
      "max_aoe": 1,
      "min_range": 12,
      "max_range": 12
    },

    {
      "id": "PSY_roulette_cone_cold",
      "type": "SPELL",
      "name": "Cone of Cold",
      "description": "You blast a cone of frigid air toward the target.",
      "effect": "attack",
      "shape": "cone",
      "valid_targets": [ "ally", "hostile", "ground" ],
      "flags": [ "SOMATIC", "VERBAL" ],
      "max_level": 0,
      "min_damage": 36,
      "max_damage": 36,
      "min_aoe": 45,
      "max_aoe": 45,
      "min_range": 12,
      "max_range": 12,
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "base_casting_time": 200,
      "base_energy_cost": 350,
      "energy_source": "MANA",
      "difficulty": 4,
      "field_id": "fd_cold_air2",
      "min_field_intensity": 2,
      "max_field_intensity": 2,
      "damage_type": "cold"
    },

    {
      "id": "PSY_roulette_cone_fog",
      "type": "SPELL",
      "name": "Cone of Mist",
      "description": "You blast a cone of frigid air toward the target.",
      "effect": "attack",
      "shape": "cone",
      "valid_targets": [ "ally", "hostile", "ground" ],
      "flags": [ "SOMATIC", "VERBAL" ],
      "max_level": 0,
      "min_damage": 20,
      "max_damage": 20,
      "min_aoe": 45,
      "max_aoe": 45,
      "min_range": 12,
      "max_range": 12,
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "base_casting_time": 200,
      "base_energy_cost": 350,
      "energy_source": "MANA",
      "difficulty": 4,
      "field_id": "fd_fog",
      "min_field_intensity": 1,
      "max_field_intensity": 1,
      "damage_type": "pure"
    },

    {
      "id": "PSY_roulette_vacuum_decompression",
      "type": "SPELL",
      "name": "Vacuum Decompression",
      "description": "Create a high-pressure zone originating from the selected point.  Shortly after, a massive pressure wave will crush everything inside, inflicting barotraumatic injuries on everyone affected.  The pressure differential will also pull unprepared creatures inside the zone before collapsing.",
      "effect": "attack",
      "shape": "blast",
      "valid_targets": [ "self", "ally", "hostile", "ground" ],
      "flags": [ "SOMATIC", "VERBAL", "NO_LEGS", "EXTRA_EFFECTS_FIRST" ],
      "max_level": 0,
      "min_damage": 55,
      "max_damage": 55,
      "damage_increment": { "math": [ "evocation_proficiency_bonus_calculate(5, 0.042)" ] },
      "min_aoe": 4,
      "max_aoe": 4,
      "min_range": 12,
      "max_range": 12,
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "base_casting_time": 450,
      "final_casting_time": 100,
      "casting_time_increment": -14,
      "base_energy_cost": 400,
      "final_energy_cost": 250,
      "energy_increment": -6,
      "energy_source": "MANA",
      "difficulty": 7,
      "damage_type": "cut",
      "extra_effects": [
        { "id": "PSY_roulette_vacuum_decompression_pull" },
        { "id": "PSY_roulette_vacuum_decompression_pull" },
        { "id": "PSY_roulette_vacuum_decompression_pull" },
        { "id": "PSY_roulette_vacuum_decompression_pull" },
        { "id": "PSY_roulette_vacuum_decompression_pull" },
        { "id": "PSY_roulette_vacuum_decompression_pull" },
        { "id": "PSY_roulette_vacuum_decompression_pull" }
      ]
    },
    {
      "id": "PSY_roulette_vacuum_decompression_pull",
      "type": "SPELL",
      "name": "Vacuum Decompression Pull",
      "description": "Pull monsters around the target.  You can see it only in debug mode.",
      "effect": "area_pull",
      "shape": "blast",
      "valid_targets": [ "hostile", "ground" ],
      "flags": [ "SILENT", "NO_EXPLOSION_SFX" ],
      "max_level": 0,
      "min_aoe": 8,
      "max_aoe": 8
    },

    {
      "id": "PSY_roulette_druid_tornskin",
      "type": "SPELL",
      "name": "Tornskin",
      "description": "This spell, which resembles Thornskin through the sap & needles covering the page, seemed to involve thorns and bleeding wounds.  The marred words may have altered the function.",
      "valid_targets": [ "hostile", "ground", "ally", "self" ],
      "flags": [ "SOMATIC" ],
      "effect": "attack",
      "effect_str": "tornskin_pain",
      "shape": "blast",
      "affected_body_parts": [ "head", "torso", "mouth", "eyes", "arm_l", "arm_r", "hand_r", "hand_l", "leg_l", "foot_l", "foot_r" ],
      "min_dot": 2,
      "max_dot": 2,
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "base_casting_time": 300,
      "base_energy_cost": 100,
      "energy_source": "MANA",
      "difficulty": 4,
      "max_level": 10,
      "min_damage": 2,
      "max_damage": 2,
      "min_aoe": 3,
      "max_aoe": 3,
      "min_range": 0,
      "max_range": 0,
      "min_duration": 400,
      "max_duration": 400,
      "min_pierce": 0,
      "max_pierce": 3,
      "pierce_increment": 0.3,
      "damage_type": "pure"
    },

    {
      "id": "PSY_roulette_seismic_stomp",
      "type": "SPELL",
      "name": "Seismic Stomp",
      "description": "Focusing mana into your leg, you stomp your foot and send out a shockwave, knocking enemies around you onto the ground.",
      "effect": "attack",
      "effect_str": "downed",
      "shape": "blast",
      "valid_targets": [ "hostile", "ground" ],
      "flags": [ "SOMATIC", "LOUD", "NO_PROJECTILE" ],
      "max_level": 10,
      "min_damage": 30,
      "max_damage": 30,
      "min_aoe": 7,
      "max_aoe": 7,
      "min_range": 2,
      "max_range": 2,
      "aoe_increment": 1,
      "min_duration": 2500,
      "max_duration": 2500,
      "spell_class": "PSY_magi_DUNGEON_MAGE",
      "base_casting_time": 100,
      "base_energy_cost": 250,
      "energy_source": "MANA",
      "difficulty": 2,
      "damage_type": "bash"
    }






]